<!DOCTYPE html>
<html>
<head>
    <title>Chat</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.1/socket.io.js"
            integrity="sha512-C+X/K/ZUr/dLpD6IwC6U+sk6UJQ6ZaJdWkyT8TImLXnpE2a+V+wjWw4J0vSw4z93uF7pTKsLbBa8+EgJXGj+bg=="
            crossorigin="anonymous"></script>
</head>
<body>
<div>
    <h1>Chat Room</h1>
    <hr>
    <div id="chat-box"></div>
    <form>
        <input type="text" id="message-input" placeholder="Type your message here...">
        <button type="submit" id="send-button">Send</button>
    </form>
</div>

<script>
    const socket = io('http://localhost:8000');

    const chatBox = document.getElementById('chat-box');
    const messageInput = document.getElementById('message-input');
    const sendButton = document.getElementById('send-button');

    function addMessageToChatBox(message) {
        const p = document.createElement('p');
        p.innerHTML = message;
        chatBox.appendChild(p);
    }

    socket.on('connect', () => {
        console.log('Connected to server!');
    });

    socket.on('disconnect', () => {
        console.log('Disconnected from server!');
    });

    socket.on('new_message', (message) => {
        console.log('New message:', message);
        addMessageToChatBox(message);
    });

    sendButton.addEventListener('click', (event) => {
        event.preventDefault();
        const message = messageInput.value;
        messageInput.value = '';
        socket.emit('send_message', message);
    });
</script>
</body>
</html>
